<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>AR Web - Futuristik Glass Morph</title>
  <!-- A-Frame + AR.js -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    body { 
      margin: 0; 
      font-family: 'Segoe UI', Roboto, -apple-system, sans-serif;
      background: #000;
      overflow: hidden;
    }
    .hint {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 20px;
      background: rgba(0,0,0,0.7);
      color: #fff;
      padding: 12px;
      border-radius: 16px;
      z-index: 999;
      font-size: 16px;
      text-align: center;
      margin: 0 auto;
      width: 90%;
      max-width: 500px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
    }
    .fallback {
      display: none;
      padding: 20px;
      color: white;
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
    }
    .marker-help {
      background: rgba(255,255,255,0.1);
      padding: 16px;
      border-radius: 12px;
      margin-top: 20px;
      backdrop-filter: blur(10px);
    }
    a {
      color: #0af;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="hint">
    Arahkan kamera ke marker AR. 
    <a href="https://iili.io/Fmi7QKg.jpg" target="_blank">Download marker</a>
  </div>

  <!-- Fallback view -->
  <div id="preview" class="fallback" style="display:block;">
    <h2 style="color: #0af">Futuristik Glass Morph</h2>
    <p>Preview mode - Gunakan perangkat mobile untuk pengalaman AR</p>
    <div class="marker-help">
      <h4>Untuk mencoba AR:</h4>
      <ol>
        <li>Download marker image</li>
        <li>Buka di perangkat lain atau print</li>
        <li>Arahkan kamera ponsel ke marker</li>
        <li>Konten futuristik akan muncul!</li>
      </ol>
    </div>
  </div>

  <!-- A-Frame AR scene -->
  <a-scene 
    vr-mode-ui="enabled: false"
    embedded 
    arjs="sourceType: webcam; debugUIEnabled: false;"
    renderer="logarithmicDepthBuffer: true;"
  >

    <!-- Marker-based AR content -->
    <a-marker preset="hiro">
      <!-- Main glass morph container -->
      <a-entity position="0 0.5 0" rotation="-90 0 0">
        <!-- Glass panel base -->
        <a-circle 
          radius="0.8" 
          color="#fff" 
          opacity="0.1" 
          position="0 0 0"
          material="shader: flat; src: #glassTex; transparent: true"
        ></a-circle>
        
        <!-- Glass border effect -->
        <a-ring 
          radius-inner="0.78" 
          radius-outer="0.8" 
          color="#0af" 
          opacity="0.5"
          position="0 0.01 0"
        ></a-ring>
        
        <!-- Content container -->
        <a-entity position="0 0.1 0">
          <!-- Main image -->
          <a-image 
            src="https://xppfmghrhhrejnopnyir.supabase.co/storage/v1/object/public/ewan/WhatsApp%20Image%202025-08-18%20at%2018.14.03.jpeg"
            width="1.2"
            height="0.8"
            position="0 0.2 0"
            material="transparent: true; opacity: 0.9"
          ></a-image>
          
          <!-- Bullet points (5 items) -->
          <a-entity position="0 -0.3 0" rotation="0 0 0">
            <!-- Bullet 1 -->
            <a-entity class="bullet" bullet-id="1" position="-0.4 0 0.2">
              <a-circle 
                radius="0.05" 
                color="#0af" 
                opacity="0.8"
                material="shader: flat"
              ></a-circle>
              <a-circle 
                radius="0.03" 
                color="#fff" 
                position="0 0 0.01"
              ></a-circle>
            </a-entity>
            
            <!-- Bullet 2 -->
            <a-entity class="bullet" bullet-id="2" position="-0.2 0 0.2">
              <a-circle 
                radius="0.05" 
                color="#0af" 
                opacity="0.8"
                material="shader: flat"
              ></a-circle>
              <a-circle 
                radius="0.03" 
                color="#fff" 
                position="0 0 0.01"
              ></a-circle>
            </a-entity>
            
            <!-- Bullet 3 -->
            <a-entity class="bullet" bullet-id="3" position="0 0 0.2">
              <a-circle 
                radius="0.05" 
                color="#0af" 
                opacity="0.8"
                material="shader: flat"
              ></a-circle>
              <a-circle 
                radius="0.03" 
                color="#fff" 
                position="0 0 0.01"
              ></a-circle>
            </a-entity>
            
            <!-- Bullet 4 -->
            <a-entity class="bullet" bullet-id="4" position="0.2 0 0.2">
              <a-circle 
                radius="0.05" 
                color="#0af" 
                opacity="0.8"
                material="shader: flat"
              ></a-circle>
              <a-circle 
                radius="0.03" 
                color="#fff" 
                position="0 0 0.01"
              ></a-circle>
            </a-entity>
            
            <!-- Bullet 5 -->
            <a-entity class="bullet" bullet-id="5" position="0.4 0 0.2">
              <a-circle 
                radius="0.05" 
                color="#0af" 
                opacity="0.8"
                material="shader: flat"
              ></a-circle>
              <a-circle 
                radius="0.03" 
                color="#fff" 
                position="0 0 0.01"
              ></a-circle>
            </a-entity>
          </a-entity>
          
          <!-- Image display area (hidden by default) -->
          <a-image 
            id="bullet-image"
            width="0.8"
            height="0.6"
            position="0 0.4 0"
            visible="false"
            material="transparent: true"
          ></a-image>
        </a-entity>
      </a-entity>
    </a-marker>

    <!-- Static camera (fallback when no marker) -->
    <a-entity id="static-view" visible="false" position="0 0 -2">
      <a-entity position="0 0 -1.5">
        <a-plane 
          width="1.6" 
          height="0.9" 
          position="0 0 0"
          material="shader: flat; src: #fallbackTex; transparent: true"
        ></a-plane>
      </a-entity>
    </a-entity>

    <!-- Camera setup -->
    <a-entity camera></a-entity>

    <!-- Assets -->
    <a-assets>
      <!-- Glass texture -->
      <canvas id="glass" width="1024" height="1024"></canvas>
      
      <!-- Fallback texture -->
      <canvas id="fallback" width="1600" height="900"></canvas>
      
      <!-- Dummy images for bullet points -->
      <img id="img1" src="https://via.placeholder.com/800x600/0af/ffffff?text=Image+1" crossorigin="anonymous">
      <img id="img2" src="https://via.placeholder.com/800x600/0af/ffffff?text=Image+2" crossorigin="anonymous">
      <img id="img3" src="https://via.placeholder.com/800x600/0af/ffffff?text=Image+3" crossorigin="anonymous">
      <img id="img4" src="https://via.placeholder.com/800x600/0af/ffffff?text=Image+4" crossorigin="anonymous">
      <img id="img5" src="https://via.placeholder.com/800x600/0af/ffffff?text=Image+5" crossorigin="anonymous">
    </a-assets>
  </a-scene>

  <script>
    // Create glass texture
    function createGlassTexture() {
      const canvas = document.getElementById('glass');
      const ctx = canvas.getContext('2d');
      
      // Gradient background
      const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
      gradient.addColorStop(0, 'rgba(0, 170, 255, 0.1)');
      gradient.addColorStop(1, 'rgba(0, 170, 255, 0.05)');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Noise effect
      ctx.fillStyle = 'rgba(255, 255, 255, 0.02)';
      for (let i = 0; i < 1000; i++) {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        const size = Math.random() * 3;
        ctx.fillRect(x, y, size, size);
      }
      
      // Highlight effect
      ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
      ctx.beginPath();
      ctx.arc(canvas.width * 0.7, canvas.height * 0.3, 200, 0, Math.PI * 2);
      ctx.fill();
    }
    
    // Create fallback texture
    function createFallbackTexture() {
      const canvas = document.getElementById('fallback');
      const ctx = canvas.getContext('2d');
      
      // Gradient background
      const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
      gradient.addColorStop(0, '#001f3f');
      gradient.addColorStop(1, '#000');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Title
      ctx.fillStyle = '#0af';
      ctx.font = 'bold 60px "Segoe UI", sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('FUTURISTIK GLASS MORPH', canvas.width/2, 120);
      
      // Instructions
      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
      ctx.font = '30px "Segoe UI", sans-serif';
      ctx.fillText('Arahkan kamera ke marker AR', canvas.width/2, 200);
      
      // Glass card preview
      ctx.fillStyle = 'rgba(0, 170, 255, 0.1)';
      ctx.strokeStyle = 'rgba(0, 170, 255, 0.5)';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.roundRect(200, 250, canvas.width-400, 300, 20);
      ctx.fill();
      ctx.stroke();
      
      // Content preview
      ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
      ctx.font = '24px "Segoe UI", sans-serif';
      ctx.fillText('Konten utama akan muncul di sini', canvas.width/2, 350);
      ctx.fillText('Dengan 5 titik interaktif', canvas.width/2, 400);
    }
    
    // Initialize textures
    createGlassTexture();
    createFallbackTexture();
    
    // Wait for A-Frame to be ready
    window.addEventListener('load', () => {
      const assets = document.querySelector('a-assets');
      
      // Create texture images from canvases
      const glassCanvas = document.getElementById('glass');
      const glassImg = document.createElement('img');
      glassImg.id = 'glassTex';
      glassImg.src = glassCanvas.toDataURL();
      assets.appendChild(glassImg);
      
      const fallbackCanvas = document.getElementById('fallback');
      const fallbackImg = document.createElement('img');
      fallbackImg.id = 'fallbackTex';
      fallbackImg.src = fallbackCanvas.toDataURL();
      assets.appendChild(fallbackImg);
      
      // Check AR compatibility
      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        document.getElementById('preview').style.display = 'none';
        
        // Show static view if no marker detected after 5 seconds
        setTimeout(() => {
          const marker = document.querySelector('a-marker');
          if (!marker || !marker.object3D.visible) {
            document.getElementById('static-view').setAttribute('visible', 'true');
          }
        }, 5000);
      }
      
      // Add click handlers for bullet points
      document.querySelector('a-scene').addEventListener('click', (e) => {
        const bullet = e.target.closest('.bullet');
        if (bullet) {
          const bulletId = bullet.getAttribute('bullet-id');
          const imageElement = document.getElementById('bullet-image');
          
          // Set image source based on bullet ID
          imageElement.setAttribute('src', `#img${bulletId}`);
          imageElement.setAttribute('visible', 'true');
          
          // Add animation
          imageElement.setAttribute('animation', {
            property: 'scale',
            from: '0.5 0.5 0.5',
            to: '1 1 1',
            dur: 500,
            easing: 'easeOutElastic'
          });
          
          // Hide image after 5 seconds
          setTimeout(() => {
            imageElement.setAttribute('visible', 'false');
          }, 5000);
        }
      });
      
      // Add hover effects for bullet points
      const bullets = document.querySelectorAll('.bullet');
      bullets.forEach(bullet => {
        bullet.addEventListener('mouseenter', () => {
          bullet.setAttribute('animation', {
            property: 'scale',
            to: '1.2 1.2 1.2',
            dur: 200,
            easing: 'easeOutQuad'
          });
        });
        
        bullet.addEventListener('mouseleave', () => {
          bullet.setAttribute('animation', {
            property: 'scale',
            to: '1 1 1',
            dur: 200,
            easing: 'easeOutQuad'
          });
        });
      });
    });
  </script>
</body>
</html>
